.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "HARDPH" "8" "2023\-04\-10" "hardph 2.0" "System Administration Commands"
.hy
.SH NAME
.PP
hardph \- hardening command\-line tool for Pi\-hole
.SH SYNOPSIS
.PP
\f[B]hardph\f[] \f[I][OPTION]\f[]...
.PD 0
.P
.PD
\f[B]hardph\f[] [\f[I]OPTION\f[]]...
\-d \f[I]MODE\f[] \f[I]IP\f[][,...] ...
.PD 0
.P
.PD
\f[B]hardph\f[] [\f[I]OPTION\f[]]...
\-r \f[I]MODE\f[] \f[I]IP\f[][,...] ...
.SH DESCRIPTION
.PP
\f[B]hardph\f[] applies allowlist desktop firewall rules, based on
\f[I]MODE\f[]s from its config file.
It supports firewalld or UFW and assumes a GNU/Linux system.
.PP
The \f[I]MODE\f[]s are: \f[B]pihole\f[], \f[B]ssh\f[], and \f[B]web\f[].
The allowed \f[I]IP\f[]s must be IPv4 and comma delimited (if option
defined) in order to be validated.
.PP
In addition, \f[B]hardph\f[] includes commands to delete/restrict the
allowed \f[I]IP\f[]s, reset the firewall and apply the recommended
Pi\-hole rules, also output the system\[aq]s network information.
.PP
After parsing its \f[I]IP\f[]s from the config file/command\-line,
\f[B]hardph\f[] checks if a port/service of \f[I]MODE\f[] is active,
then removes it before applying the firewall allow rules \[em] hence it
is recommended in advance to save the current rules, or use the
\f[B]\-\-dry\-run\f[] option \[em] to avoid losing the previous rules.
.SH OPTIONS
.SS General Information
.TP
.B \f[B]\-h\f[], \f[B]\-\-help\f[]
Output the help usage and exit.
.RS
.RE
.TP
.B \f[B]\-i\f[], \f[B]\-\-info\f[]
Output the system\[aq]s network information, all \f[I]MODE\f[]s status
information, and exit.
.RS
.RE
.TP
.B \f[B]\-V\f[], \f[B]\-\-version\f[]
Output the \f[B]hardph\f[] version number and exit.
.RS
.RE
.SS Output Control
.TP
.B \f[B]\-q\f[], \f[B]\-\-quiet\f[]
Do not write anything to the standard output.
.RS
.RE
.TP
.B \f[B]\-v\f[], \f[B]\-\-verbose\f[]
Show more output information.
.RS
.RE
.SS Firewall Control
.TP
.B \f[B]\-n\f[], \f[B]\-\-dry\-run\f[]
Print and do not execute the firewall commands.
.RS
.RE
.TP
.B \f[B]\-d\f[] \f[I]MODE\f[] \f[I]IP\f[][,...], \f[B]\-\-delete\f[]=\f[I]MODE\f[] \f[I]IP\f[][,...]
Delete \f[I]IP\f[] address of \f[I]MODE\f[] and do not parse the config
file.
.RS
.RE
.TP
.B \f[B]\-r\f[] \f[I]MODE\f[] \f[I]IP\f[][,...], \f[B]\-\-restrict\f[]=\f[I]MODE\f[] \f[I]IP\f[][,...]
Restrict \f[I]MODE\f[] by \f[I]IP\f[] address and do not parse the
config file.
.RS
.RE
.TP
.B \f[B]\-R\f[], \f[B]\-\-reset\f[]
Reset the firewall and apply the recommended Pi\-hole rules.
.RS
.RE
.SS Configuration File
.TP
.B \f[B]\-\-config\-path\f[]=\f[I]PATH\f[]
Set the pathname of config file, otherwise \f[I]PATH\f[] is set to the
user\[aq]s home directory.
.RS
.RE
.SH FILES
.TP
.B \f[I]~/.hardph.cfg\f[]
The default \f[B]hardph.cfg\f[] config file directory.
See \f[B]hardph.cfg\f[](5) for usage information.
.RS
.RE
.SH ENVIRONMENT
.TP
.B \f[B]CFGPATH\f[]
If \f[B]$CFGPATH\f[] is set, its value overrides the pathname of
\f[B]hardph.cfg\f[] file.
.RS
.RE
.SH EXIT STATUS
.TP
.B \f[B]0\f[]
Successful program execution.
.RS
.RE
.TP
.B \f[B]1\f[]
Usage, syntax or file error.
.RS
.RE
.TP
.B \f[B]2\f[]
Firewall command error.
.RS
.RE
.SH EXAMPLES
.TP
.B \f[B]$ hardph \-\-quiet\f[]
Parse/apply the \f[I]IP\f[]s of \f[I]~/.hardph.cfg\f[] file and suppress
the stdout, including errors.
.RS
.RE
.TP
.B \f[B]$ hardph \-r pihole 192.168.0.0/24 \-r web 192.168.0.3,192.168.0.7\f[]
Allow only the 192.168.0.1\[en]254 range of \f[I]IP\f[]s to access
Pi\-hole, also only the 192.168.0.3 and 192.168.0.7 \f[I]IP\f[]s to
access the web interface.
.RS
.RE
.TP
.B \f[B]$ hardph \-d pihole 192.168.0.0/24 \-d web 192.168.0.3,192.168.0.7\f[]
Undo the command above.
.RS
.RE
.TP
.B \f[B]$ hardph \-\-dry\-run \-\-reset\f[]
Print and do not execute the \f[B]\-\-reset\f[] firewall commands, for
testing.
.RS
.RE
.TP
.B \f[B]$ hardph \-\-verbose \-\-restrict=ssh 10.0.0.5,10.0.0.6,10.0.0.7\f[]
Execute \f[B]hardph\f[] in verbose mode; allow only the 10.0.0.5,
10.0.0.6, and 10.0.0.7 \f[I]IP\f[]s to access the SSH server.
.RS
.RE
.TP
.B \f[B]$ export CFGPATH=/tmp; hardph\f[]
Export \f[B]$CFGPATH\f[] environment variable to the \f[I]/tmp\f[]
directory and execute \f[B]hardph\f[].
Equivalent to \f[B]hardph \-\-config\-path=/tmp\f[].
.RS
.RE
.SH BUGS
.PP
Report bugs to <https://github.com/ryoskzypu/hard_pihole/issues>.
.SH SEE ALSO
.PP
\f[B]firewall\-cmd\f[](1), \f[B]hardph.cfg\f[](5), \f[B]pihole\f[](8),
\f[B]ufw\f[](8)
.PP
<https://docs.pi-hole.net/main/prerequisites/#firewalls>,
<https://reddit.com/r/pihole/comments/x7wns0/pihole_hardening_tips_4fun>
.SH AUTHOR
.PP
ryoskzypu <ryoskzypu@proton.me>
.SH COPYRIGHT
.PP
Copyright Â© 2023 ryoskzypu.
License: MIT <https://github.com/ryoskzypu/hard_pihole/raw/main/LICENSE>
.PD 0
.P
.PD
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
